<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta content="Roel Willems" name="author">
  
  <title>Roel Willems   - Micro guide: Additional steps and recommendations when using Cloudflare for your DNS </title>
  
  <link href="/assets/css/style.css" rel="stylesheet">
  <link href="/assets/css/highlight.css" rel="stylesheet">
  <link rel="stylesheet" href="/custom.css">

	<link rel="shortcut icon" href="https://micro.blog/roelwillems/favicon.png" type="image/x-icon" />
  <link rel="alternate" type="application/rss+xml" title="Roel Willems" href="https://roelwillems.com/feed.xml" />
  
  <link rel="alternate" type="application/json" title="Roel Willems" href="https://roelwillems.com/feed.json" />
  <link rel="EditURI" type="application/rsd+xml" href="/rsd.xml" />

  <link rel="me" href="https://micro.blog/roelwillems" />
  
  
  
  <link rel="authorization_endpoint" href="https://micro.blog/indieauth/auth" />
  <link rel="token_endpoint" href="https://micro.blog/indieauth/token" />
  <link rel="micropub" href="https://micro.blog/micropub" />
  <link rel="webmention" href="https://micro.blog/webmention" />
  <link rel="subscribe" href="https://micro.blog/users/follow" />

</head>
<body>
  <nav class="main-nav">
  
  <a class="normal" href="/"> <span class="arrow">←</span> Home</a>
  

	
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
	
		
			<a href="/about/">About</a>
		
	
		
			<a href="/archive/">Archive</a>
		
	
		
			<a href="/contact/">Contact</a>
		
	
		
			<a href="/micro-guides/">Micro guides</a>
		
	
		
			<a href="/on-this-day/">On this day</a>
		
	

  <a class="cta" href="https://micro.blog/roelwillems" rel="me">Also on Micro.blog</a>
</nav>

  
  <section id="wrapper">
    <article class="h-entry post">
  <header>
	
    <h1 class="p-name">Micro guide: Additional steps and recommendations when using Cloudflare for your DNS</h1>
    
    <h2 class="headline">
      <time class="dt-published" datetime="2018-04-16 22:19:43 +0200">
        <a class="u-url dates" href="/2018/04/16/micro-guide-additional.html">April 16, 2018</a>
      </time>
    </h2>
  </header>
  <section class="e-content post-body">
      <p><a href="https://www.cloudflare.com/">Cloudflare</a> users wanting to use a custom domain name for their hosted Micro.blog will be greeted by a <code class="highlighter-rouge">“custom domain isn't pointing to the micro.blog"</code> error message when trying to save the custom domain.</p>

<p>Luckily there is a work around:</p>

<h2 id="how-to-get-your-custom-domain-working-with-cloudflare">How to get your custom domain working <em>with</em> Cloudflare</h2>
<ol>
  <li>First follow the steps as outlined above and add the proper “A” and/or “CNAME” records to the Cloudflare DNS panel;</li>
  <li>Before adding the custom domain to your Micro.blog account make sure that the “DNS and HTTP proxy (CDN)”  (orange cloud-icon) is disabled and set to bypass (grey cloud icon with the hover text “DNS only”);</li>
  <li>After updating your DNS records and Cloudflare set to bypass for the “A” record and/or “CNAME” go to “Account” on Micro.blog  and fill hostname (e.g. yourdomain.com) that you’d like to use for your Micro.blog;</li>
  <li>Micro.blog should save and enable to custom domain without issues. <em>If you get a message “custom domain isn’t pointing to the micro.blog”</em> make sure that you have set Cloudflare on bypass and wait for a few more minutes (the DNS change can take some time to get in effect);</li>
  <li>After successful saving the custom domain you can re-enable Cloudflare functionality on your domain/Micro.blog by remove the bypass, make sure that the cloud-icon is set to orange (hover text should state: “DNS and HTTP proxy (CDN)”).</li>
</ol>

<p><em>So there you have it, you are able to use  Cloudflare (DNS/CDN/security/caching/DDOS protection) with hosted Micro.blogs, with some  additional steps to get the initial setup working.</em></p>

<h2 id="some-additional-recommendations">Some additional recommendations:</h2>

<h3 id="using-cloudflare-to-redirect-www-to-root-domain">Using Cloudflare to redirect www. to root domain</h3>
<p>If you would like to enable www. and root version of your custom domain it’s advisable to redirect one to the other (to make sure that there isn’t any duplicated content). Cloudflare can redirect the www. version to the root domain:</p>
<ol>
  <li>Go to “Page rules” within your Cloudflare account;</li>
  <li>Create a page rule;</li>
  <li>Add &lt;www.yourdomain.com&gt;/* within the first field (“If the URL matches”);</li>
  <li>Under “Then the settings are:” select “Forwarding URL”, “ 301 - Permanent redirect”;</li>
  <li>Add: &lt;yourdomain.com&gt;/$1 to the destination URL field;</li>
  <li>Save and deploy the page rule for the redirect to take effect.</li>
</ol>

<h3 id="cloudflare-ssl-and-your-microblog">Cloudflare, SSL and your Micro.blog</h3>
<p>You should not use the SSL functionality provided by Cloudflare (email help@micro.blog to enable SSL).</p>

  </section>
</article>
<section id="post-meta" class="clearfix">
  <a href="/">
    <img class="u-photo avatar" src="https://micro.blog/roelwillems/avatar.jpg">
    <div>
      <span class="p-author h-card dark">Roel Willems</span>
      <span><a href="https://micro.blog/roelwillems">@roelwillems</a></span>
    </div>
  </a>
</section>

  </section>
  <footer id="footer">
    <section id="wrapper">
  <ul>
    <li><a href="/feed.xml">RSS</a></li>
    <li><a href="/feed.json">JSON Feed</a></li>
    <li><a href="https://micro.blog/roelwillems" rel="me">Micro.blog</a></li>
<!--     <li><a class="u-email" href="mailto:" rel="me">Email</a></li> -->
  </ul>
  <form method="get" id="search" action="https://duckduckgo.com/">
    <input type="hidden" name="sites" value="https://roelwillems.com"/>
    <input type="hidden" name="k8" value="#444444"/>
    <input type="hidden" name="k9" value="#ee4792"/>
    <input type="hidden" name="kt" value="h"/>
    <input class="field" type="text" name="q" maxlength="255" placeholder="To search, type and hit Enter&hellip;"/>
    <input type="submit" value="Search" style="display: none;" />
  </form>
</section>

  </footer>
  <section id="wrapper">
<div class="licence">
    <ul>
  <li>
    <p><center>
    <a href="https://indieweb.org/">
      <img src="https://f000.backblazeb2.com/file/Roel-Share/indieweb-badge.png" style="border-width:0;width:80px;image-rendering:pixelated;"></a>
      <a href="https://indieweb.org/Webmention">
      <img src="https://f000.backblazeb2.com/file/Roel-Share/webmention-badge.png" style="border-width:0;width:80px;image-rendering:pixelated;"></a>
    <a href="http://microformats.org">
      <img src="https://f000.backblazeb2.com/file/Roel-Share/microformats-badge.png" style="border-width:0;width:80px;image-rendering:pixelated;"></a>     <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/"><img alt="Creative Commons License" style="border-width:0;width:80px;image-rendering:pixelated;" src="https://f000.backblazeb2.com/file/Roel-Share/creative-commons-badge.png">
      </center></p>
 </li>
    </ul>
    <ul><li><p><center>This site and its content by <a xmlns:cc="http://creativecommons.org/ns#" href="https://roelwillems.com" property="cc:attributionName" rel="cc:attributionURL">Roel Willems</a> is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike 4.0 International License</a>.</center></p></li></ul>
    <ul><li><p><center><a xmlns:dct="http://purl.org/dc/terms/" href="https://roelwillems.com" rel="dct:source">https://roelwillems.com</a></center></p></center></p></li></ul>
</div>
</section>
</body>
</html>
